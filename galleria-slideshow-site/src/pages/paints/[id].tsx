import Head from "next/head";
import { paints } from "../../data/data";
import { Navbar } from "../../components/Navbar";
import { GetStaticPaths, GetStaticProps, InferGetStaticPropsType } from "next";
import { BottomBar } from "../../components/BottomBar";

export const getStaticPaths: GetStaticPaths = async () => {
  const paths = paints.map((paint) => ({
    params: { id: paint.id.toString() },
  }));
  return { paths, fallback: false };
};

export const getStaticProps: GetStaticProps = async ({ params }) => {
  const paint = paints.filter((p) => p.id.toString() === params?.id);
  return {
    props: {
      allPaintsData: paint[0],
    },
  };
};

const Paint = ({
  allPaintsData,
}: InferGetStaticPropsType<typeof getStaticProps>) => {
  return (
    <>
      <Head>
        <title>Galleria SlideShow Site</title>
        <meta name="description" content="Generated by create-t3-app" />
        <link rel="icon" href="/favicon-32x32.png" />
      </Head>
      <Navbar />
      <main>
        <div className="relative">
          <img src={allPaintsData.images.thumbnail} alt={allPaintsData.name} />
          <h1 className="absolute bottom-0">{allPaintsData.name}</h1>
          <p>{allPaintsData.artist.name}</p>
        </div>
        <h1>This the page for {allPaintsData.name}</h1>
      </main>
      <BottomBar
        nameOfPaint={allPaintsData.name}
        artist={allPaintsData.artist.name}
      />
    </>
  );
};

export default Paint;
